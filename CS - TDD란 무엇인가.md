- TDD란 용어를 정말 많이 들어봤지만, TDD가 Test Driven Development의 약자라는 것만 알 뿐, 그것이 정확히 무엇을 의미하는지 몰랐다. 프로젝트에 TDD를 적용시킨다고 하는데, 어떤 걸 의미하는지 정확히 알고 싶어서 알아보게 되었다.

---


# ◎ TDD란 무엇인가?

- `TDD`란 `Test Driven Develpment`의 약자로 **`'테스트 주도 개발'`** 이라고 한다.
- **반복 테스트**를 이용한 소프트웨어 방법론으로, **작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복하여 구현**한다.
<br>
- 엔지니어 `켄트 벡(Kent Beck)`에 의해 고안되었다.
- TDD의 바이블을 집필한 '켄트 백'은 'TDD가 단순한 설계를 장려하고 자신감을 불어넣어준다.'라고 말하였다.
- 짧은 개발 주기의 반복에 의존하는 개발 프로세스이며 애자일 방법론 중 하나인 eXtream Programming(XP)의 'Test-First' 개념에 기반을 둔 단순한 설계를 중요시한다.
    - **eXtream Programming(XP)**란?
    
    → 미래에 대한 예측을 최대한 하지 않고, 지속적으로 프로토타입을 완성하는 애자일 방법론 중 하나이다. 이 방법으론은 추가 요구사항이 생기더라도, 실시간으로 반영할 수 있다.
    
- TDD는 `Clean code that works`를 목표로 한다.
- TDD에서는 제품의 기능 구현을 위한 코드와 별개로, 해당 기능이 정상적으로 움직이는지 검증하기 위한 테스트 코드를 작성한다. 이를 통해 테스트가 실패할 경우, 테스트를 통과하기 위한 최소한으로 코드를 개선한다. 최종적으로 테스트에 성공한 코드를 리팩토링 하는 과정을 거친다.

<br>

---
## ■ ChatGPT에게 물어본 TDD의 정의와 비유
<br>

- TDD(Test-Driven Development)는 소프트웨어 개발 방법 중 하나로, 테스트 케이스를 먼저 작성하고, 그에 맞추어 소프트웨어를 개발하는 방법입니다. TDD는 개발자가 코드의 정확성과 기능을 보장하는 데 도움이 되며, 코드의 유지보수성과 확장성을 높일 수 있습니다.
<br>
- 비유적으로 설명하자면, TDD는 **요리를 하는 것**과 비슷합니다. 먼저 레시피를 참고하여 필요한 재료를 준비하고, 먹고 싶은 요리를 완성할 수 있는 과정을 따릅니다. 이 때, 요리를 시작하기 전에 미리 맛을 보기 위해 간을 해보는 것과 같이, TDD는 개발자가 코드를 작성하기 전에 테스트를 먼저 작성하여 코드가 기대한 대로 작동하는지 확인합니다.
<br>
- 또 다른 비유적 예시로는 **건물을 건설하는 것**과 비슷합니다. 건물을 지을 때에는 기반부터 차근차근쌓아올리지만, **TDD**에서는 테스트를 먼저 작성하여 건축물이 안전하고 안정적으로 지어지는지 확인하고, 그 후에 실제 코드를 작성하여 건물을 완성해나갑니다.

---

# ◎ TDD를 왜 해야 하는 걸까?

## ■ TDD의 개발 주기

![https://velog.velcdn.com/cloudflare/wngud4950/e21f89a9-6485-45d3-936f-59dd33779bf2/image.png](https://velog.velcdn.com/cloudflare/wngud4950/e21f89a9-6485-45d3-936f-59dd33779bf2/image.png)

### TDD는 위와 같은 3단계의 개발주기로 갖는다.

- **Red 단계**에서는 실패하는 테스트 코드를 먼저 작성한다. → **테스트 실패**
    - 구체적인 하나의 요구사항을 검증하는 하나의 테스트를 추가한다.
    - 추가된 테스트가 실패하는지 확인한다.
    <br>
- **Green 단계**에서는 성공하기 위해 코드를 수정한다. → **테스트 성공**
    - 추가된 테스트를 포함하여, 모든 테스트가 성공하게끔 운영 코드를 변경한다.
    - 테스트의 성공은 모든 요구사항을 만족했음을 의미한다.
    - 테스트 성공을 위한 최소한의 코드 변경만 진행한다.
    <br>
- **Blue 단계**에서는 중복 코드를 제거하는 등의 리팩토링을 수행한다. → **리팩토링**
    - 코드베이스를 정리한다.
    - 인터페이스 뒤에 숨어 있는 **구현 설계를 개선**한다.
    - 가독성, 적용성, 성능을 고려한다.
    

---
## ■ 일반 개발 방식과 TDD 개발 방식의 비교

### **일반 개발 방식**

- 보통 개발 방식은 ‘요구사항 분석 → 설계 → 개발 → 테스트 → 배포’의 형태의 개발 주기를 갖는다.

![https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/%E1%84%80%E1%85%B5%E1%84%8C%E1%85%A9%E1%86%AB%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3.png?resize=514%2C114&ssl=1](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/%E1%84%80%E1%85%B5%E1%84%8C%E1%85%A9%E1%86%AB%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3.png?resize=514%2C114&ssl=1)

- 이러한 방식은 소프트웨어 개발을 느리게 하는 **잠재적 위험이 존재**한다.
    - **소비자의 요구사항이 처음부터 명확하지 않을 수 있기 때문**에 처음부터 완벽한 설계는 어렵다.
    - 작은 부분의 기능 수정에도 모든 부분을 테스트해야 하므로 전체적인 버그를 검출하기 어려워진다. 따라서 **자체 버그 검출 능력이 저하**된다.
    - 그 결과 어디서 버그가 발생할지 모르기 때문에 잘못된 코드도 고치지 않으려 하는 현상이 나타나게 되어 **소스코드 품질이 저하**될 수 있다.
    - 작은 수정에도 모든 기능을 다시 테스트해야하는 문제가 발생하여 **자체 테스트 비용이 증가**된다.
    <br>
- 이러한 문제점이 발생되는 이유는 어느 프로젝트든 초기 설계가 완벽하다고 말할 수 없기 때문
- 고객의 요구사항 또는 디자인의 오류 등 많은 외부 또는 내부 조건에 의해 **재설계하여 점진적으로 완벽한 설계로** 나아간다.
- 재설계로 인해 개발자는 코드를 삽입, 수정, 삭제하는 과정에서 불필요한 코드가 남거나 중복처 될 가능성이 크다.

→ 결론적으로 이러한 코드들은 재사용이 어렵고 관리가 어려워서 유지보수를 어렵게 만든다.

  

### **TDD 개발 방식**

- TDD와 일반적인 개발 방식의 가장 큰 차이점은 **테스트 코드를 작성한 뒤에 실제 코드를 작성**한다는 것이다.
- `디자인(설계)` 단계에서 프로그래밍 목적을 반드시 미리 정의하고 테스트해야할 지 미리 정의를 해야한다.
- 테스트 코드를 작성하는 도중 발생하는 예외 사항(버그 및 수정사항)은 테스트 케이스에 추가하고 설계를 개선한다.
- 이후 테스트가 통과된 코드만을 코드 개발 단계에서 실제 코드로 작성한다.

![https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/TDD%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3.png?resize=528%2C165&ssl=1](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/TDD%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3.png?resize=528%2C165&ssl=1)

- 이러한 단계가 반복적으로 진행되면서 자연스럽게 **코드의 버그는 줄어들고 소스의 코드는 간결**해진다.
- 또한 테스트 케이스 작성으로 인해 자연스럽게 설계가 개선됨으로 **재설계 시간이 절감**될 수 있다.
<br>

![](https://velog.velcdn.com/images/dellojoon7/post/c390c826-e589-44ad-a150-553a618d3afa/image.png)


---
## ■ TDD의 장점

**1. 높은 코드 안정성**

- 짧은 주기의 테스트 코드 개발-리팩토링 단계를 거치며 끊임 없이 보완한다
- **철저한 모듈화**를 통해 종속성과 의존성이 낮은 모듈로 조합된 소프트웨어 개발을 가능하게 함
  
    → 필요에 따라 모듈을 추가하거나 제거해도 소프트웨어 전체 구조에 영향 X
    
- 이에 따라 코드의 안정성을 높일 수 있고, 보다 튼튼한 **객체 지향적인 코드를 생산**한다.
    - **객체지향적 프로그래밍** : 어떤 프로그램의 일부분에 해당하는 작은 부품, 즉 객체를 먼저 만들고 이렇게 만들어진 여러 객체들을 조립해서 하나의 완성된 프로그램을 만드는 프로그래밍 방법론
- **TDD**는 “모든 코드”가 재사용성 기반으로 작성되어야 하므로 기본적으로 객체지향적
<br>

**2. 재설계 시간의 단축**

- TDD는 설계 단계에서 테스트 시나리오를 작성하기 때문에 무엇을 해야하는 지 분명히 정의하고 개발을 시작해, 완성도 높은 설계로 이어진다.
- 이는 개발 진행 중에 소프트웨어의 전반적인 설계가 변경되는 일을 방지할 수 있다.
<br>

**3. 디버깅 시간의 단축**

- 모듈 별로 테스트를 자동화를 하지 않는 다면 에러가 생겼을 경우 모든 레벨의 코드를 살펴봐야한다.
- 하지만 TDD의 경우 **자동화된 단위테스트**를 통해 특정 버그를 쉽게 찾을 수 있다.
<br>

**4. 테스트 문서의 대체 가능 **
- 주로 SI (System Integration, 시스템 개발 및 고도화) 프로젝트 진행 과정에서 어떤 요소들이 테스트 되었는지 테스트 정의서를 만든다. 이것은 단순 통합테스트 문서에 지나지 않게 된다.
- 하지만 TDD의 경우 테스팅을 자동화 시킴과 동시에, **보다 정확한 테스트 근거를 산출** 가능
<br>

**5. 개발 과정이 테스트 코드로 남기 때문에, 과거 의사결정을 쉽게 상기 가능 **
<br>

→ 하지만 이러한 장점에도 불구하고 TDD를 쉽게 도입하지 못하는 여러가지 이유(단점)도 존재한다.

## ■ TDD의 단점

- **생산성의 저하**가 가장 큰 단점 
<br>
- 한번 개발할 코드를 2번 이상 반복하게 되어 일반적인 개발 방식보다 개발 시간이 늘어날 수 밖에 없다.
- TDD 방식의 개발 시간은 일반적인 개발 방식에 비해 대략 10~30% 정도로 늘어난다.
- 또 단순 개발이나 단발성 프로젝트의 경우 개발기간이 짧아 TDD를 적용하게 되었을 때 Ctrl + C, Ctrl + V를 통한 뻔하고 중복된 테스트 코드를 작성했을 때는 **비효율적**일 수 있다.
<br>
---
## ◎ 그 외
### ■ chatGPT -> 깃헙에서 브랜치 파서 작업하는거는 TDD야?
깃헙에서 브랜치를 파서 작업하는 것은 TDD가 아닙니다.

TDD는 테스트를 먼저 작성하고, 그에 맞게 코드를 작성하는 개발 방법론입니다. 이를 통해 코드의 정확성과 기능을 보장하며, 코드의 유지보수성과 확장성을 높일 수 있습니다.

반면, 깃헙에서 브랜치를 파서 작업하는 것은 소프트웨어 개발 프로세스 중 버전 관리에 해당합니다. 이는 다수의 개발자들이 동시에 작업할 때, 작업 중인 코드를 다른 사람이나 팀원들과 공유하고, 변경사항을 추적하고, 충돌을 해결하는 등의 작업을 수행하는 것입니다.

따라서, 깃헙에서 브랜치를 파서 작업하는 것은 TDD와는 별개의 개념입니다.
<br>

### ■ 좋은 테스트 코드를 위한 **'FIRST 규칙'**

- **Fast** 테스트는 빠르게 동작하여 자주 돌릴 수 있어야 한다. <br>
  
    만약 테스트가 느리다면 개발자는 테스트를 주저하게 되고 자주 검증하지 않은 소스코드는 그만큼 버그가 발생할 확률이 높아진다.
    <br>
- **Independent** 각각의 테스트는 독립적이며 서로 의존해서는 안된다. <br>
  
    테스트에 필요한 데이터는 테스트 내부에서 독립적으로 사용해야 한다. 만약 데이터가 서로에게 의존하면 테스트 하나가 실패할 때 나머지도 잇달아 실패하므로 원인을 진단하기 어려워지기 때문이다. 때론 데이터의 존재 여부를 찾는 테스트가 있는 경우엔 해당 데이터는 테스트 내부에서 생성되어야 하며 나중에 테스트에 영향을 미치지 않도록 제거해야 한다.
    <br>
- **Repeatable** 어느 환경에서도 반복 가능해야 한다.<br>
  
    여기서 환경은 네트워크 나 데이터베이스에 의존하지 않는 환경을 뜻한다. 결론적으로 인터넷이 되든 안 되든 데이터베이스에 접속하든 안 하든 언제 어디서나 테스트를 할 수 있어야 한다. 환경에 의존하지 않는 테스트가 실패할 수 있는 유일한 이유는 오로지 테스트할 클래스 또는 메소드가 제대로 작동하지 않기 때문이다.
    <br>
- **Self-Validating** 테스트는 성공 또는 실패로 boolean값으로 결과를 내어 자체적으로 검증되어야 한다.<br>
  
    테스트의 검증은 수작업이 아닌 자동화가 되어야 하는데 테스트가 실행될 때마다 메서드 출력이 올바른지를 확인하는 것은 개발자가 결정해서는 안 된다.
    <br>
- **Timely**
  
    테스트는 적시에 <br>즉, 테스트하려는 실제 코드를 구현하기 직전에 구현해야 한다.
    

<br><br>
### ◎ 참고 사이트

[https://hanamon.kr/tdd란-테스트-주도-개발/](https://hanamon.kr/tdd%EB%9E%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A3%BC%EB%8F%84-%EA%B0%9C%EB%B0%9C/)